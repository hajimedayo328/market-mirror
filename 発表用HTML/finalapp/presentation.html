<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Market Mirror - ãƒ—ãƒ¬ã‚¼ãƒ³ãƒ†ãƒ¼ã‚·ãƒ§ãƒ³</title>
    
    <!-- Reveal.js CDN -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/reveal.js@5.0.4/dist/reveal.css">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/reveal.js@5.0.4/dist/theme/white.css">
    
    <!-- Tailwind CSS CDN -->
    <script src="https://cdn.tailwindcss.com"></script>
    
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800&family=Noto+Sans+JP:wght@300;400;500;600;700;800&display=swap');
        
        :root {
            --primary-blue: #0066FF;
            --primary-blue-dark: #0052CC;
            --accent-purple: #5856D6;
            --accent-pink: #AF52DE;
            --bg-white: #ffffff;
            --bg-gray: #f5f5f7;
            --bg-gray-light: #fafafa;
            --text-primary: #1a1a1a;
            --text-secondary: #6e6e73;
            --text-tertiary: #86868b;
            --border-light: #d2d2d7;
            --border-subtle: #e5e5ea;
            --shadow-sm: 0 1px 3px rgba(0, 0, 0, 0.05);
            --shadow-md: 0 4px 12px rgba(0, 0, 0, 0.08);
            --shadow-lg: 0 8px 24px rgba(0, 0, 0, 0.12);
        }
        
        .reveal {
            font-family: 'Inter', 'Noto Sans JP', -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif;
            background: linear-gradient(180deg, #ffffff 0%, #fafafa 100%);
            color: var(--text-primary);
        }
        
        .reveal .slides section {
            text-align: left;
            background: var(--bg-white);
            padding: 4rem 5rem;
            border-radius: 0;
            box-shadow: var(--shadow-lg);
            border: none;
        }
        
        .reveal h1, .reveal h2, .reveal h3 {
            font-family: 'Inter', 'Noto Sans JP', -apple-system, BlinkMacSystemFont, sans-serif;
            font-weight: 700;
            letter-spacing: -0.02em;
            color: var(--text-primary);
            margin-bottom: 2rem;
            line-height: 1.2;
        }
        
        .reveal h1 {
            font-size: 4rem;
            font-weight: 800;
            background: linear-gradient(135deg, var(--primary-blue), var(--accent-purple));
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            border-bottom: none;
            padding-bottom: 0;
            margin-bottom: 1.5rem;
        }
        
        .reveal h2 {
            font-size: 2.75rem;
            font-weight: 700;
            color: var(--text-primary);
            margin-bottom: 1.5rem;
        }
        
        .reveal h3 {
            font-size: 1.75rem;
            font-weight: 600;
            color: var(--text-secondary);
            margin-top: 1rem;
            margin-bottom: 1rem;
        }
        
        .reveal p, .reveal li {
            font-size: 1.25rem;
            line-height: 1.75;
            color: var(--text-secondary);
            font-weight: 400;
        }
        
        .reveal strong {
            color: var(--text-primary);
            font-weight: 600;
        }
        
        .accent-blue {
            color: var(--primary-blue);
            font-weight: 600;
        }
        
        .accent-purple {
            color: var(--accent-purple);
            font-weight: 600;
        }
        
        .accent-pink {
            color: var(--accent-pink);
            font-weight: 600;
        }
        
        .code-block {
            background: var(--bg-gray);
            border: 1px solid var(--border-subtle);
            border-radius: 0.75rem;
            padding: 1.5rem 2rem;
            font-family: 'SF Mono', 'Monaco', 'Cascadia Code', 'Courier New', monospace;
            color: var(--text-primary);
            font-size: 1rem;
            margin: 1.5rem 0;
            box-shadow: var(--shadow-sm);
        }
        
        .tech-badge {
            display: inline-block;
            background: var(--bg-gray);
            border: 1px solid var(--border-light);
            color: var(--text-primary);
            padding: 0.5rem 1.25rem;
            border-radius: 1.5rem;
            font-size: 0.9rem;
            font-weight: 500;
            margin: 0.25rem;
            box-shadow: var(--shadow-sm);
            transition: all 0.2s ease;
        }
        
        .tech-badge:hover {
            background: var(--bg-white);
            box-shadow: var(--shadow-md);
            transform: translateY(-1px);
        }
        
        .demo-button {
            display: inline-block;
            background: var(--primary-blue);
            color: white;
            padding: 1.25rem 2.5rem;
            border-radius: 1.5rem;
            text-decoration: none;
            font-weight: 600;
            font-size: 1.25rem;
            transition: all 0.3s ease;
            box-shadow: var(--shadow-md);
            border: none;
        }
        
        .demo-button:hover {
            background: var(--primary-blue-dark);
            transform: translateY(-2px);
            box-shadow: var(--shadow-lg);
        }
        
        /* Prisma Studio button hover effect */
        .reveal a[href="http://localhost:5555"]:hover {
            background: var(--accent-purple);
            opacity: 0.9;
            transform: translateY(-2px);
            box-shadow: var(--shadow-lg);
        }
        
        /* Back to Architecture button hover effect */
        .reveal a[href="#/6"]:hover {
            background-color: #f1f5f9;
            border-color: #64748b;
            color: #334155;
        }
        
        .highlight-box {
            background: linear-gradient(135deg, rgba(0, 102, 255, 0.05), rgba(88, 86, 214, 0.05));
            border-left: 4px solid var(--primary-blue);
            padding: 2rem;
            margin: 2rem 0;
            border-radius: 0.75rem;
            box-shadow: var(--shadow-sm);
        }
        
        .mermaid {
            background: var(--bg-white);
            padding: 2.5rem;
            border-radius: 1rem;
            border: 1px solid var(--border-subtle);
            box-shadow: var(--shadow-sm);
        }
        
        ul {
            list-style: none;
            padding-left: 0;
        }
        
        ul li {
            position: relative;
            padding-left: 1.5rem;
            margin-bottom: 0.75rem;
        }
        
        ul li::before {
            content: "â†’";
            position: absolute;
            left: 0;
            color: var(--primary-blue);
            font-weight: 600;
        }
        
        .author-info {
            color: var(--text-tertiary);
            font-size: 1.1rem;
            margin-top: 3rem;
            font-weight: 400;
        }
        
        .gradient-text {
            background: linear-gradient(135deg, var(--primary-blue), var(--accent-purple));
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            font-weight: 700;
        }
        
        .number-highlight {
            font-size: 2.5rem;
            font-weight: 800;
            color: var(--primary-blue);
            letter-spacing: -0.02em;
        }
        
        .step-box {
            background: var(--bg-gray-light);
            border: 1px solid var(--border-subtle);
            padding: 1.5rem 2rem;
            margin: 1rem 0;
            border-radius: 0.75rem;
            box-shadow: var(--shadow-sm);
            transition: all 0.2s ease;
        }
        
        .step-box:hover {
            box-shadow: var(--shadow-md);
            transform: translateX(4px);
        }
        
        .step-number {
            display: inline-block;
            background: var(--primary-blue);
            color: white;
            width: 2rem;
            height: 2rem;
            border-radius: 50%;
            text-align: center;
            line-height: 2rem;
            font-weight: 700;
            font-size: 1rem;
            margin-right: 1rem;
        }
        
        /* ã‚¿ã‚¤ãƒˆãƒ«ã‚¹ãƒ©ã‚¤ãƒ‰ç”¨ã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³ */
        @keyframes fadeInUp {
            from {
                opacity: 0;
                transform: translateY(30px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }
        
        @keyframes fadeIn {
            from {
                opacity: 0;
            }
            to {
                opacity: 1;
            }
        }
        
        @keyframes slideInRight {
            from {
                opacity: 0;
                transform: translateX(50px);
            }
            to {
                opacity: 1;
                transform: translateX(0);
            }
        }
        
        @keyframes slideInLeft {
            from {
                opacity: 0;
                transform: translateX(-50px);
            }
            to {
                opacity: 1;
                transform: translateX(0);
            }
        }
        
        @keyframes zoomIn {
            from {
                opacity: 0;
                transform: scale(0.8);
            }
            to {
                opacity: 1;
                transform: scale(1);
            }
        }
        
        /* å…¨ã‚¹ãƒ©ã‚¤ãƒ‰ç”¨ã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³ - åˆæœŸçŠ¶æ…‹ã¯éè¡¨ç¤º */
        .reveal .slides section.animate-on-load h2,
        .reveal .slides section.animate-on-load h3,
        .reveal .slides section.animate-on-load p,
        .reveal .slides section.animate-on-load ul li,
        .reveal .slides section.animate-on-load .step-box,
        .reveal .slides section.animate-on-load .highlight-box,
        .reveal .slides section.animate-on-load .mermaid,
        .reveal .slides section.animate-on-load .code-block {
            opacity: 0;
        }
        
        /* ã‚¹ãƒ©ã‚¤ãƒ‰ãŒè¡¨ç¤ºã•ã‚ŒãŸæ™‚ã«ã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³ */
        .reveal .slides section.present.animate-on-load h2 {
            animation: fadeInUp 0.8s ease-out forwards;
        }
        
        .reveal .slides section.present.animate-on-load h3 {
            animation: fadeInUp 0.8s ease-out 0.2s forwards;
        }
        
        .reveal .slides section.present.animate-on-load p {
            animation: fadeIn 0.8s ease-out 0.4s forwards;
        }
        
        .reveal .slides section.present.animate-on-load ul li {
            animation: slideInRight 0.6s ease-out forwards;
        }
        
        .reveal .slides section.present.animate-on-load .step-box {
            animation: slideInLeft 0.6s ease-out forwards;
        }
        
        .reveal .slides section.present.animate-on-load .highlight-box {
            animation: zoomIn 0.8s ease-out 0.3s forwards;
        }
        
        .reveal .slides section.present.animate-on-load .mermaid {
            animation: zoomIn 1s ease-out 0.5s forwards;
        }
        
        .reveal .slides section.present.animate-on-load .code-block {
            animation: fadeIn 0.8s ease-out 0.4s forwards;
        }
        
        /* ãƒªã‚¹ãƒˆã‚¢ã‚¤ãƒ†ãƒ ã®é…å»¶ */
        .reveal .slides section.present.animate-on-load ul li:nth-child(1) { animation-delay: 0.5s; }
        .reveal .slides section.present.animate-on-load ul li:nth-child(2) { animation-delay: 0.6s; }
        .reveal .slides section.present.animate-on-load ul li:nth-child(3) { animation-delay: 0.7s; }
        .reveal .slides section.present.animate-on-load ul li:nth-child(4) { animation-delay: 0.8s; }
        .reveal .slides section.present.animate-on-load ul li:nth-child(5) { animation-delay: 0.9s; }
        
        /* step-boxã®é…å»¶ */
        .reveal .slides section.present.animate-on-load .step-box:nth-of-type(1) { animation-delay: 0.5s; }
        .reveal .slides section.present.animate-on-load .step-box:nth-of-type(2) { animation-delay: 0.6s; }
        .reveal .slides section.present.animate-on-load .step-box:nth-of-type(3) { animation-delay: 0.7s; }
        .reveal .slides section.present.animate-on-load .step-box:nth-of-type(4) { animation-delay: 0.8s; }
        
        @keyframes pulse {
            0%, 100% {
                transform: scale(1);
            }
            50% {
                transform: scale(1.05);
            }
        }
        
        .title-slide {
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            min-height: 100vh;
            text-align: center;
            position: relative;
            overflow: hidden;
            padding: 4rem 5rem !important;
        }
        
        .title-slide::before {
            content: '';
            position: absolute;
            top: -50%;
            right: -50%;
            width: 200%;
            height: 200%;
            background: radial-gradient(circle, rgba(0, 102, 255, 0.05) 0%, transparent 70%);
            animation: pulse 8s ease-in-out infinite;
            z-index: 0;
        }
        
        .title-slide h1 {
            animation: fadeInUp 1s ease-out;
            position: relative;
            z-index: 1;
            font-size: 2.75rem;
            margin-bottom: 1.5rem;
            letter-spacing: -0.02em;
        }
        
        .title-slide h2 {
            animation: fadeInUp 1s ease-out 0.3s both;
            position: relative;
            z-index: 1;
            margin-top: 1rem;
            font-size: 1.75rem;
            line-height: 1.75;
        }
        
        .title-slide .tech-stack {
            animation: fadeIn 1s ease-out 0.6s both;
            position: relative;
            z-index: 1;
            margin-top: 5rem;
        }
        
        .title-slide .tech-badge {
            animation: slideInRight 0.6s ease-out both;
            margin: 0.5rem;
            font-size: 1rem;
            padding: 0.75rem 1.5rem;
            box-shadow: var(--shadow-md);
        }
        
        .title-slide .tech-badge:hover {
            transform: translateY(-2px) scale(1.05);
            box-shadow: var(--shadow-lg);
        }
        
        .title-slide .tech-badge:nth-child(1) { animation-delay: 0.8s; }
        .title-slide .tech-badge:nth-child(2) { animation-delay: 0.9s; }
        .title-slide .tech-badge:nth-child(3) { animation-delay: 1.0s; }
        .title-slide .tech-badge:nth-child(4) { animation-delay: 1.1s; }
        
        .title-slide .decorative-circle {
            position: absolute;
            border-radius: 50%;
            opacity: 0.1;
            z-index: 0;
        }
        
        .title-slide .circle-1 {
            width: 300px;
            height: 300px;
            background: var(--primary-blue);
            top: 10%;
            left: 5%;
            animation: pulse 6s ease-in-out infinite;
        }
        
        .title-slide .circle-2 {
            width: 200px;
            height: 200px;
            background: var(--accent-purple);
            bottom: 15%;
            right: 10%;
            animation: pulse 8s ease-in-out infinite 1s;
        }
        
        .title-slide .circle-3 {
            width: 150px;
            height: 150px;
            background: var(--accent-pink);
            top: 50%;
            right: 20%;
            animation: pulse 7s ease-in-out infinite 0.5s;
        }
    </style>
</head>
<body>
    <div class="reveal">
        <div class="slides">
            <!-- ã‚¹ãƒ©ã‚¤ãƒ‰1: ã‚¿ã‚¤ãƒˆãƒ« -->
            <section class="title-slide">
                <div class="decorative-circle circle-1"></div>
                <div class="decorative-circle circle-2"></div>
                <div class="decorative-circle circle-3"></div>
                
                <h1>Market Mirror</h1>
                <h2 style="color: var(--text-secondary); font-weight: 400; margin-top: 1rem; max-width: 800px;">
                    90äººã®ãƒšãƒ«ã‚½ãƒŠã«ã‚ˆã‚‹ã€Œå¸‚å ´æ­ªæ›²ã€ã‚·ãƒŸãƒ¥ãƒ¬ãƒ¼ã‚¿ãƒ¼
                </h2>
                
                <div class="tech-stack">
                    <div style="margin-bottom: 1rem; color: var(--text-tertiary); font-size: 1rem; font-weight: 500;">
                        Built with
                    </div>
                    <div>
                        <span class="tech-badge">Next.js</span>
                        <span class="tech-badge">Prisma</span>
                        <span class="tech-badge">PostgreSQL</span>
                        <span class="tech-badge">VectorDB</span>
                    </div>
                </div>
            </section>

            <!-- ã‚¹ãƒ©ã‚¤ãƒ‰2: èª²é¡Œ -->
            <section>
                <h2>èª²é¡Œï¼šå­¤ç‹¬ãªèµ·æ¥­å®¶ã®ã€Œè¿·ã„ã€</h2>
                <h3>ã‚¢ã‚¤ãƒ‡ã‚¢ã®å®Ÿç”¨æ€§ãŒã€ã™ãã«åˆ†ã‹ã‚‰ãªã„</h3>
                
                <div class="highlight-box">
                    <p style="font-size: 1.15rem; margin-bottom: 1rem;"><strong>ä¸»äººå…¬ï¼šã‚±ãƒ³ã‚¿ï¼ˆ24æ­³ãƒ»é–‹ç™ºè€…ï¼‰</strong></p>
                    <ul style="margin-top: 1rem;">
                        <li>æ·±å¤œã«æ€ã„ã¤ã„ãŸã€Œæœ€é«˜ã®ã‚¢ã‚¤ãƒ‡ã‚¢ã€ã€‚ã—ã‹ã—ç¿Œæœã«ã¯ä¸å®‰ã«ãªã‚‹ã€‚</li>
                        <li>ã€Œæœ¬å½“ã«éœ€è¦ã¯ã‚ã‚‹ã®ã‹ï¼Ÿ ä½œã£ã¦ã‹ã‚‰å¤±æ•—ã—ãŸã‚‰ï¼Ÿã€</li>
                        <li>å‹äººã®ã€Œã„ã„ã­ã€ã¯å„ªã—ã„å˜˜ã€‚AIã®è‚¯å®šã¯ç„¡è²¬ä»»ã€‚</li>
                    </ul>
                </div>
                
                <p style="margin-top: 2.5rem; font-size: 1.5rem; color: var(--text-primary); font-weight: 600; line-height: 1.6;">
                    æ¬²ã—ã„ã®ã¯ã€å¿–åº¦ã®ãªã„<strong style="color: var(--primary-blue);">ã€Œå¸‚å ´ã®ç½µè©ˆé›‘è¨€ã€</strong>ã ã€‚
                </p>
            </section>

            <!-- ã‚¹ãƒ©ã‚¤ãƒ‰3: è§£æ±ºç­– -->
            <section>
                <h2>è§£æ±ºç­–ï¼š90äººã®ã€Œä»®æƒ³ãƒ¢ãƒ‹ã‚¿ãƒ¼ã€</h2>
                <h3>3ã¤ã®å¸‚å ´ Ã— 30äººã®å®šè¦</h3>
                
                <ul style="margin-top: 2rem;">
                    <li>ã‚¿ãƒ¼ã‚²ãƒƒãƒˆã«åˆã‚ã›ã¦ã€Œ<span class="accent-blue">æ—¥æœ¬äºº</span>ã€ã€Œ<span class="accent-purple">è¨ªæ—¥å¤–å›½äºº</span>ã€ã€Œ<span class="accent-pink">ãƒ“ã‚¸ãƒã‚¹å±¤</span>ã€ã‚’é¸æŠå¯èƒ½ã€‚</li>
                    <li>åˆè¨ˆ<span class="number-highlight">90äºº</span>ã®äººæ ¼ã‚’DBã«å®Œå…¨å›ºå®šã€‚</li>
                    <li>æ¯å›å¤‰ã‚ã‚‹AIã§ã¯ãªãã€<strong>ã€Œå¸¸ã«åŒã˜åŸºæº–ã§æ¸¬ã‚Œã‚‹å®šè¦ã€</strong>ã¨ã—ã¦å®Ÿè£…ã€‚</li>
                </ul>
                
                <div class="code-block" style="margin-top: 2.5rem;">
                    <div style="margin-bottom: 0.5rem;">Standard_Japan: 30äºº</div>
                    <div style="margin-bottom: 0.5rem;">Inbound_Tourist: 30äºº</div>
                    <div>Biz_Tech: 30äºº</div>
                </div>
            </section>

            <!-- ã‚¹ãƒ©ã‚¤ãƒ‰4: ç‹¬è‡ªæ©Ÿèƒ½ -->
            <section>
                <h2>ç‹¬è‡ªæ©Ÿèƒ½ï¼šäººé–“çš„ãªã€Œæ­ªã¿ã€</h2>
                <h3>Human Distortion Mode</h3>
                
                <div class="highlight-box" style="margin-top: 2rem;">
                    <p style="margin-bottom: 0.5rem; color: var(--text-primary);">
                        å¸‚å ´ã¯è«–ç†ï¼ˆLogicï¼‰ã§ã¯ãªãã€<span class="accent-pink">ãƒã‚¤ã‚ºï¼ˆNoiseï¼‰</span>ã§å‹•ãã€‚
                    </p>
                </div>
                
                <ul style="margin-top: 2.5rem;">
                    <li><span class="accent-blue">åŒèª¿åœ§åŠ› (Social Pressure)</span> - ã‚¤ãƒ³ãƒ•ãƒ«ã‚¨ãƒ³ã‚µãƒ¼ã®æ„è¦‹ã«è¿½éš</li>
                    <li><span class="accent-purple">æ„Ÿæƒ…ãƒã‚¤ã‚¢ã‚¹ (Emotional Bias)</span> - æ°—åˆ†ã§è©•ä¾¡ãŒå¤‰å‹•</li>
                    <li><span class="accent-pink">å€‹äººãƒã‚¤ã‚¢ã‚¹ (Personal Bias)</span> - ä¸»è¦³çš„ãªå¥½ãå«Œã„</li>
                    <li><span class="accent-blue">æ™‚é–“çš„ã‚³ãƒ³ãƒ†ã‚­ã‚¹ãƒˆ (Temporal)</span> - æ›œæ—¥ãƒ»æ™‚é–“å¸¯ã®å½±éŸ¿</li>
                </ul>
                
                <p style="margin-top: 2.5rem; color: var(--text-primary);">
                    ã“ã‚Œã‚‰ã‚’ã‚¹ãƒ©ã‚¤ãƒ€ãƒ¼ã§èª¿æ•´ã—ã€AIã‚’ã‚ãˆã¦<strong>ã€Œä¸åˆç†ãªäººé–“ã€</strong>ã«ã™ã‚‹ã€‚
                </p>
            </section>

            <!-- ã‚¹ãƒ©ã‚¤ãƒ‰5-1: ãƒ­ã‚¸ãƒƒã‚¯ï¼ˆèª¬æ˜ï¼‰ -->
            <section>
                <h2 style="font-size: 2.75rem !important;">ãƒ­ã‚¸ãƒƒã‚¯ï¼šå‹•çš„ã‚·ãƒŸãƒ¥ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³ã‚¨ãƒ³ã‚¸ãƒ³</h2>
                <h3 style="font-size: 1.75rem !important;">è¨­å®šå€¤ã«ã‚ˆã‚‹ã€Œæ€è€ƒå›è·¯ã€ã®å‹•çš„ç”Ÿæˆ</h3>
                
                <p style="margin-top: 2rem; color: var(--text-primary); font-size: 1.3rem;">
                    å˜ãªã‚‹ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆã‚¨ãƒ³ã‚¸ãƒ‹ã‚¢ãƒªãƒ³ã‚°ã§ã¯ãªã„ã€‚ã‚¹ãƒ©ã‚¤ãƒ€ãƒ¼ã®è¨­å®šå€¤ (<code style="background: var(--bg-gray); padding: 0.2rem 0.5rem; border-radius: 0.25rem; font-family: 'SF Mono', monospace; font-size: 1.15rem;">distortionWeights</code>) ã«å¿œã˜ã¦ã€Workerã®å®Ÿè¡Œãƒ­ã‚¸ãƒƒã‚¯è‡ªä½“ãŒåˆ†å²ã™ã‚‹ã€‚
                </p>
                
                <div style="margin-top: 2rem;">
                    <div class="step-box" style="font-size: 1.2rem;">
                        <strong style="color: var(--primary-blue);">Mode A: Social (åŒèª¿)</strong> â†’ ã‚¤ãƒ³ãƒ•ãƒ«ã‚¨ãƒ³ã‚µãƒ¼èµ·ç‚¹ã®ã€Œ2æ®µéšä¼æ’­ã‚¢ãƒ«ã‚´ãƒªã‚ºãƒ ã€ã‚’å®Ÿè¡Œã€‚
                    </div>
                    <div class="step-box" style="font-size: 1.2rem;">
                        <strong style="color: var(--accent-purple);">Mode B: Emotional (æ„Ÿæƒ…)</strong> â†’ ä¹±æ•°ç”Ÿæˆã«ã‚ˆã‚‹ã€Œç¢ºç‡çš„ãƒã‚¤ã‚ºæ··å…¥ã€ã‚’å®Ÿè¡Œã€‚
                    </div>
                    <div class="step-box" style="font-size: 1.2rem;">
                        <strong style="color: var(--accent-pink);">Mode C: Bias (åè¦‹)</strong> â†’ ãƒ¦ãƒ¼ã‚¶ãƒ¼å›ºæœ‰ã®ã€Œå—œå¥½ãƒ‡ãƒ¼ã‚¿ã€ã‚’é‡ã¿ä»˜ã‘ã—ã¦é©ç”¨ã€‚
                    </div>
                    <div class="step-box" style="font-size: 1.2rem;">
                        <strong style="color: var(--primary-blue);">Mode D: Temporal (æ™‚é–“)</strong> â†’ æ›œæ—¥ã‚„æ™‚é–“å¸¯ï¼ˆä¾‹: æœˆæ›œæœï¼‰ã®ã‚³ãƒ³ãƒ†ã‚­ã‚¹ãƒˆã‚’å‹•çš„ã«æ³¨å…¥ã€‚
                    </div>
                </div>
                
                <p style="margin-top: 2rem; color: var(--text-primary); font-weight: 600; font-size: 1.3rem;">
                    ãƒ¦ãƒ¼ã‚¶ãƒ¼ã¯<strong>ã€Œã©ã‚“ãªå¸‚å ´ã‚·ãƒŸãƒ¥ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³ã‚’è¡Œã†ã‹ã€</strong>ã‚’ã‚³ãƒ¼ãƒ‰ãƒ¬ãƒ™ãƒ«ã§åˆ¶å¾¡ã§ãã‚‹ã€‚
                </p>
            </section>

            <!-- ã‚¹ãƒ©ã‚¤ãƒ‰5-2: ãƒ­ã‚¸ãƒƒã‚¯ï¼ˆãƒ•ãƒ­ãƒ¼ãƒãƒ£ãƒ¼ãƒˆï¼‰ -->
            <section>
                <h2>ãƒ­ã‚¸ãƒƒã‚¯ï¼šå‹•çš„ã‚·ãƒŸãƒ¥ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³ã‚¨ãƒ³ã‚¸ãƒ³</h2>
                <h3>å®Ÿè¡Œãƒ•ãƒ­ãƒ¼ã®å¯è¦–åŒ–</h3>
                
                <div class="mermaid" style="margin-top: 2rem; padding: 1.5rem; font-size: 0.7rem;">
                    graph LR
                        A[Input] --> B[Router]
                        B --> C[Social Flow<br/>2æ®µéšä¼æ’­]
                        B --> D[Emotional Flow<br/>ç¢ºç‡ãƒã‚¤ã‚º]
                        B --> E[Bias Flow<br/>å—œå¥½é‡ã¿]
                        B --> G[Temporal Flow<br/>æ™‚é–“ã‚³ãƒ³ãƒ†ã‚­ã‚¹ãƒˆ]
                        C --> F[Output]
                        D --> F
                        E --> F
                        G --> F
                        
                        style A fill:#0066FF,stroke:#0066FF,stroke-width:2px,color:#fff
                        style B fill:#5856D6,stroke:#5856D6,stroke-width:2px,color:#fff
                        style C fill:#0066FF,stroke:#0066FF,stroke-width:2px,color:#fff
                        style D fill:#AF52DE,stroke:#AF52DE,stroke-width:2px,color:#fff
                        style E fill:#AF52DE,stroke:#AF52DE,stroke-width:2px,color:#fff
                        style G fill:#0066FF,stroke:#0066FF,stroke-width:2px,color:#fff
                        style F fill:#5856D6,stroke:#5856D6,stroke-width:2px,color:#fff
                </div>
            </section>

            <!-- ã‚¹ãƒ©ã‚¤ãƒ‰6-1: æŠ€è¡“æ§‹æˆï¼ˆèª¬æ˜ï¼‰ -->
            <section>
                <h2>æŠ€è¡“æ§‹æˆï¼šå®Œå…¨éåŒæœŸã‚·ã‚¹ãƒ†ãƒ </h2>
                <h3>90ç§’ã®æ€è€ƒã‚’æ”¯ãˆã‚‹ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£</h3>
                
                <ul style="margin-top: 2rem;">
                    <li>ãƒ¦ãƒ¼ã‚¶ãƒ¼ä½“é¨“ã‚’æãªã‚ãªã„ <span class="accent-blue">Job Queue & Worker</span> æ§‹æˆã€‚</li>
                    <li>ãƒ–ãƒ©ã‚¦ã‚¶ã‚’é–‰ã˜ã¦ã‚‚å‡¦ç†ã¯å®Œé‚ã•ã‚Œã‚‹ã€‚</li>
                    <li>ãƒãƒƒãƒå‡¦ç†ï¼ˆ10äººãšã¤ï¼‰ã§DBæ¥ç¶šãƒ—ãƒ¼ãƒ«ã‚’ä¿è­·ã€‚</li>
                </ul>
                
                <div class="highlight-box" style="margin-top: 3rem;">
                    <p style="color: var(--text-primary);">
                        <strong>éåŒæœŸå‡¦ç†</strong>ã«ã‚ˆã‚Šã€90äººã®ãƒšãƒ«ã‚½ãƒŠè©•ä¾¡ã‚’ãƒãƒƒã‚¯ã‚°ãƒ©ã‚¦ãƒ³ãƒ‰ã§å®Ÿè¡Œã€‚<br>
                        ãƒ¦ãƒ¼ã‚¶ãƒ¼ã¯å¾…æ©Ÿç”»é¢ã§é€²æ—ã‚’ç¢ºèªã—ã€å®Œäº†å¾Œã«è©³ç´°ãªãƒ¬ãƒãƒ¼ãƒˆã‚’é–²è¦§ã§ãã‚‹ã€‚
                    </p>
                </div>
            </section>

            <!-- ã‚¹ãƒ©ã‚¤ãƒ‰6-2: æŠ€è¡“æ§‹æˆï¼ˆERå›³ï¼‰ -->
            <section>
                <h2>æŠ€è¡“æ§‹æˆï¼šå®Œå…¨éåŒæœŸã‚·ã‚¹ãƒ†ãƒ </h2>
                <h3>DBè¨­è¨ˆã®è¨¼æ‹  (ERå›³)</h3>
                
                <div class="mermaid" style="margin-top: 2rem; padding: 1.5rem; font-size: 0.75rem;">
                    erDiagram
                        Persona ||--o{ Review : evaluates
                        Idea ||--o{ Review : receives
                        Idea ||--o{ AnalysisJob : generates
                        
                        Persona {
                            int id PK
                            string name
                            string category
                            string personality
                        }
                        
                        Idea {
                            int id PK
                            string title
                            string category
                            vector embedding
                        }
                        
                        Review {
                            int id PK
                            int ideaId FK
                            int personaId FK
                            int score
                            boolean willBuy
                        }
                        
                        AnalysisJob {
                            int id PK
                            int ideaId FK
                            string status
                            json distortionWeights
                        }
                </div>
                
                <div style="margin-top: 2.5rem; text-align: center;">
                    <a href="http://localhost:5555" target="_blank" style="display: inline-block; padding: 0.875rem 2rem; font-size: 1rem; background: var(--accent-purple); color: white; border-radius: 0.5rem; text-decoration: none; transition: all 0.3s ease; font-weight: 600; box-shadow: var(--shadow-md);">
                        Open Live Data (Prisma Studio) ğŸš€
                    </a>
                </div>
            </section>

            <!-- ã‚¹ãƒ©ã‚¤ãƒ‰7: ãƒ‡ãƒ¢ -->
            <section>
                <h2>å®Ÿæ¼”</h2>
                <h3>Live Demo</h3>
                
                <div style="margin-top: 5rem; text-align: center;">
                    <a href="http://localhost:3000" class="demo-button" target="_blank" style="color: white !important;">
                        ğŸš€ ã‚¢ãƒ—ãƒªã‚’èµ·å‹•
                    </a>
                </div>
                
                <div style="margin-top: 3rem; text-align: center; color: var(--text-tertiary);">
                    <p style="font-size: 1.1rem; font-weight: 400;">http://localhost:3000</p>
                </div>
            </section>

            <!-- ã‚¹ãƒ©ã‚¤ãƒ‰8: å±•æœ› -->
            <section>
                <h2>å±•æœ›ï¼š1000äººã®ã€Œä»®æƒ³éƒ½å¸‚ã€ã¸</h2>
                <h3>ã‚¹ã‚±ãƒ¼ãƒ©ãƒ“ãƒªãƒ†ã‚£ã¨æœªæ¥</h3>
                
                <ul style="margin-top: 2rem;">
                    <li>DBã®ãƒ¬ã‚³ãƒ¼ãƒ‰ã‚’è¿½åŠ ã™ã‚‹ã ã‘ã§ã€<span class="number-highlight">1,000äººã€œ10,000äºº</span>è¦æ¨¡ã¸æ‹¡å¼µå¯èƒ½ã€‚</li>
                    <li>ä¼æ¥­ã”ã¨ã®<span class="accent-purple">ã€Œã‚«ã‚¹ã‚¿ãƒ ãƒšãƒ«ã‚½ãƒŠã€</span>ä½œæˆæ©Ÿèƒ½ã€‚</li>
                    <li>ãƒªãƒªãƒ¼ã‚¹å‰ã®<span class="accent-pink">ã€Œä»®æƒ³ç‚ä¸Šãƒ†ã‚¹ãƒˆã€</span>ã‚¤ãƒ³ãƒ•ãƒ©ã‚’ç›®æŒ‡ã™ã€‚</li>
                </ul>
                
                <div class="highlight-box" style="margin-top: 3rem;">
                    <p style="font-size: 1.4rem; color: var(--text-primary); font-weight: 500;">
                        <strong style="color: var(--primary-blue);">VectorDBã«ã‚ˆã‚‹é¡ä¼¼ã‚¢ã‚¤ãƒ‡ã‚¢æ¤œç´¢</strong>ã§ã€éå»ã®å¤±æ•—ãƒ‘ã‚¿ãƒ¼ãƒ³ã‚’å­¦ç¿’ã€‚
                    </p>
                </div>
                
                <div style="margin-top: 3rem; text-align: center;">
                    <p style="font-size: 1.3rem; color: var(--text-secondary); font-weight: 400; line-height: 1.8;">
                        å¸‚å ´ã®ã€Œæ­ªã¿ã€ã‚’æ•°å€¤åŒ–ã—ã€<br>
                        èµ·æ¥­å®¶ã®ã€Œè¿·ã„ã€ã‚’è§£æ¶ˆã™ã‚‹ã€‚
                    </p>
                </div>
            </section>

            <!-- ã‚¹ãƒ©ã‚¤ãƒ‰9: Appendix A - Data Schema -->
            <section>
                <h2 style="font-size: 2rem !important;">Appendix A: DB Schema (Prisma)</h2>
                <h3 style="font-size: 1.3rem !important;">å‹•çš„ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ã®ãŸã‚ã®æŸ”è»ŸãªJSONã‚¹ãƒˆãƒ¬ãƒ¼ã‚¸</h3>
                
                <div style="background: var(--bg-gray); border-radius: 0.5rem; padding: 1.5rem; margin-top: 1.5rem; overflow-x: auto;">
                    <pre style="margin: 0; font-family: 'SF Mono', 'Monaco', 'Cascadia Code', 'Roboto Mono', monospace; font-size: 0.8rem; line-height: 1.5; color: var(--text-primary);"><code>// schema.prisma
// 90äººã®æ€è€ƒã‚’æ”¯ãˆã‚‹ã‚¹ã‚­ãƒ¼ãƒå®šç¾©

// 1. åˆ†æã‚¸ãƒ§ãƒ–ç®¡ç†ãƒ†ãƒ¼ãƒ–ãƒ«
// â˜…é‡è¦: æ­ªã¿è¨­å®šã‚’JSONå‹ã§æŸ”è»Ÿã«ä¿å­˜ã™ã‚‹ã“ã¨ã§ã€
// å°†æ¥çš„ã«æ–°ã—ã„æ­ªã¿ãƒ¢ãƒ¼ãƒ‰ã‚’è¿½åŠ ã—ã¦ã‚‚ã‚¹ã‚­ãƒ¼ãƒå¤‰æ›´ãŒä¸è¦
model AnalysisJob {
  id                String    @id @default(uuid())
  ideaId            Int
  status            String    @default("PENDING") @db.VarChar(20)
  currentStep       Int       @default(0)  // ç¾åœ¨å‡¦ç†ä¸­ã®ãƒšãƒ«ã‚½ãƒŠæ•°
  totalSteps        Int       @default(90) // ç·ãƒšãƒ«ã‚½ãƒŠæ•°
  
  // â˜…é‡è¦: æ­ªã¿è¨­å®šã‚’JSONã§æŸ”è»Ÿã«ä¿å­˜
  // { social: 80, emotional: 30, bias: 20, temporal: 10 } ã®ã‚ˆã†ãªå½¢å¼
  distortionWeights Json?
  
  influencerMode    Boolean   @default(false)  // åŒèª¿åœ§åŠ›ãƒ¢ãƒ¼ãƒ‰ON/OFF
  influencerResults Json?    // ã‚¤ãƒ³ãƒ•ãƒ«ã‚¨ãƒ³ã‚µãƒ¼3äººã®è©•ä¾¡çµæœ
  result            Json?     // å…¨ãƒšãƒ«ã‚½ãƒŠã®è©•ä¾¡çµæœï¼ˆå®Œäº†æ™‚ï¼‰
  error             String?   // ã‚¨ãƒ©ãƒ¼ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ï¼ˆå¤±æ•—æ™‚ï¼‰
  
  createdAt         DateTime  @default(now())
  updatedAt         DateTime  @updatedAt
  startedAt         DateTime? // å‡¦ç†é–‹å§‹æ™‚åˆ»
  completedAt       DateTime? // å‡¦ç†å®Œäº†æ™‚åˆ»
  
  idea              Idea      @relation(fields: [ideaId], references: [id])
  
  // ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹æœ€é©åŒ–ã®ãŸã‚ã®ã‚¤ãƒ³ãƒ‡ãƒƒã‚¯ã‚¹
  @@index([ideaId])           // ã‚¢ã‚¤ãƒ‡ã‚¢IDã§ã®æ¤œç´¢ã‚’é«˜é€ŸåŒ–
  @@index([status, createdAt]) // ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹ã¨ä½œæˆæ—¥æ™‚ã§ã®ä¸¦ã³æ›¿ãˆã‚’é«˜é€ŸåŒ–
}

// 2. ãƒšãƒ«ã‚½ãƒŠãƒ†ãƒ¼ãƒ–ãƒ«ï¼ˆ90äººã®ä»®æƒ³ãƒ¦ãƒ¼ã‚¶ãƒ¼ï¼‰
// ã‚«ãƒ†ã‚´ãƒªåˆ¥ã«åˆ†é¡: "Standard_Japan", "Inbound_Tourist", "Biz_Tech"
model Persona {
  id             Int      @id @default(autoincrement())
  name           String   @db.VarChar(100)
  category       String   @db.VarChar(100)  // ã‚«ãƒ†ã‚´ãƒªã§ãƒ•ã‚£ãƒ«ã‚¿ãƒªãƒ³ã‚°å¯èƒ½
  personality    String   // æ€§æ ¼ç‰¹æ€§ï¼ˆAIè©•ä¾¡ã«ä½¿ç”¨ï¼‰
  age            Int
  occupation     String
  // ... ãã®ä»–ã®å±æ€§ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰
  
  reviews        Review[]  // ã“ã®ãƒšãƒ«ã‚½ãƒŠãŒè¡Œã£ãŸè©•ä¾¡ã®ä¸€è¦§
  
  @@index([category])  // ã‚«ãƒ†ã‚´ãƒªã§ã®æ¤œç´¢ã‚’é«˜é€ŸåŒ–
}

// 3. ã‚¢ã‚¤ãƒ‡ã‚¢ãƒ†ãƒ¼ãƒ–ãƒ«
model Idea {
  id               Int           @id @default(autoincrement())
  title            String        @db.VarChar(200)
  description      String
  
  // VectorDBç”¨ã®åŸ‹ã‚è¾¼ã¿ãƒ™ã‚¯ãƒˆãƒ«ï¼ˆOpenAI embedding: 1536æ¬¡å…ƒï¼‰
  // pgvectoræ‹¡å¼µæ©Ÿèƒ½ã‚’ä½¿ç”¨ã—ã¦é¡ä¼¼åº¦æ¤œç´¢ã‚’å®Ÿç¾
  embedding        Unsupported("vector(1536)")?
  
  reviews          Review[]      // ã“ã®ã‚¢ã‚¤ãƒ‡ã‚¢ã«å¯¾ã™ã‚‹è©•ä¾¡ã®ä¸€è¦§
  analysisJobs     AnalysisJob[] // ã“ã®ã‚¢ã‚¤ãƒ‡ã‚¢ã®åˆ†æã‚¸ãƒ§ãƒ–å±¥æ­´
  
  @@index([category])  // ã‚«ãƒ†ã‚´ãƒªã§ã®æ¤œç´¢ã‚’é«˜é€ŸåŒ–
}</code></pre>
                </div>
                
                <div style="margin-top: 1.5rem; padding: 1rem; background: var(--bg-gray-light); border-radius: 0.5rem; border-left: 4px solid var(--primary-blue);">
                    <p style="margin: 0; color: var(--text-primary); font-size: 0.95rem; line-height: 1.5;">
                        <strong style="color: var(--primary-blue);">Key Design:</strong><br>
                        â€¢ <code style="background: var(--bg-gray); padding: 0.15rem 0.3rem; border-radius: 0.25rem; font-family: 'SF Mono', monospace; font-size: 0.85rem;">distortionWeights Json?</code> ã§å‹•çš„ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ã‚’æŸ”è»Ÿã«ä¿å­˜<br>
                        â€¢ <code style="background: var(--bg-gray); padding: 0.15rem 0.3rem; border-radius: 0.25rem; font-family: 'SF Mono', monospace; font-size: 0.85rem;">embedding vector(1536)</code> ã§ VectorDB ã«ã‚ˆã‚‹é¡ä¼¼æ¤œç´¢ã‚’å®Ÿç¾<br>
                        â€¢ å¤–éƒ¨ã‚­ãƒ¼åˆ¶ç´„ã¨ã‚¤ãƒ³ãƒ‡ãƒƒã‚¯ã‚¹ã§ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹ã¨æ•´åˆæ€§ã‚’ä¿è¨¼
                    </p>
                </div>
            </section>

            <!-- ã‚¹ãƒ©ã‚¤ãƒ‰10: Appendix B - Simulation Logic -->
            <section>
                <h2 style="font-size: 2rem !important;">Appendix B: Core Logic (Worker)</h2>
                <h3 style="font-size: 1.3rem !important;">æ­ªã¿è¨­å®šã«åŸºã¥ãå‹•çš„åˆ†å²</h3>
                
                <div style="background: var(--bg-gray); border-radius: 0.5rem; padding: 1.5rem; margin-top: 1.5rem; overflow-x: auto;">
                    <pre style="margin: 0; font-family: 'SF Mono', 'Monaco', 'Cascadia Code', 'Roboto Mono', monospace; font-size: 0.8rem; line-height: 1.5; color: var(--text-primary);"><code>// worker.ts (Simulation Engine)
// 90äººã®ãƒšãƒ«ã‚½ãƒŠè©•ä¾¡ã‚’éåŒæœŸã§å®Ÿè¡Œã™ã‚‹Worker

// 1. ã‚¸ãƒ§ãƒ–æƒ…å ±ã‚’DBã‹ã‚‰å–å¾—
async function processJob(jobId: string): Promise&lt;void&gt; {
  const job = await dbClient.analysisJob.findUnique({
    where: { id: jobId },
    include: { idea: true }  // ã‚¢ã‚¤ãƒ‡ã‚¢æƒ…å ±ã‚‚ä¸€ç·’ã«å–å¾—
  });
  
  const { idea, distortionWeights: rawWeights } = job;
  
  // 2. Distortion Weightsã‚’å®‰å…¨ã«å–å¾—ï¼ˆãƒ‡ãƒ•ã‚©ãƒ«ãƒˆå€¤è¨­å®šï¼‰
  // JSONå‹ã‹ã‚‰TypeScriptã®å‹ã«å¤‰æ›ã—ã€æœªè¨­å®šã®å ´åˆã¯0ã‚’è¨­å®š
  const distortionWeights = rawWeights ? {
    social: (rawWeights as any).social || 0,      // åŒèª¿åœ§åŠ› (0-100)
    emotional: (rawWeights as any).emotional || 0, // æ„Ÿæƒ… (0-100)
    bias: (rawWeights as any).bias || 0,          // åè¦‹ (0-100)
    temporal: (rawWeights as any).temporal || 0,   // æ™‚é–“ (0-100)
  } : { social: 0, emotional: 0, bias: 0, temporal: 0 };

  // 3. ã€é‡è¦ã€‘ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ã«åŸºã¥ã„ã¦æ€è€ƒå›è·¯ã‚’å‹•çš„ã«åˆ†å²
  // å˜ãªã‚‹ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆã‚¨ãƒ³ã‚¸ãƒ‹ã‚¢ãƒªãƒ³ã‚°ã§ã¯ãªãã€ã‚¢ãƒ«ã‚´ãƒªã‚ºãƒ ãƒ¬ãƒ™ãƒ«ã§ã®åˆ†å²
  if (distortionWeights.social > 0.8) {
    // åŒèª¿åœ§åŠ›ãƒ¢ãƒ¼ãƒ‰: 2æ®µéšä¼æ’­ã‚¢ãƒ«ã‚´ãƒªã‚ºãƒ ã‚’å®Ÿè¡Œ
    // Step 1: ã‚¤ãƒ³ãƒ•ãƒ«ã‚¨ãƒ³ã‚µãƒ¼3äººã‚’å…ˆã«è©•ä¾¡
    // Step 2: ãã®çµæœã‚’ã€Œå ´ã®ç©ºæ°—ã€ã¨ã—ã¦æ®‹ã‚Š87äººã«æ³¨å…¥
    return await executePropagationAlgorithm(job, distortionWeights);
  } else if (distortionWeights.emotional > 0.7) {
    // æ„Ÿæƒ…ãƒ¢ãƒ¼ãƒ‰: ç¢ºç‡çš„ãƒã‚¤ã‚ºæ··å…¥ã‚¢ãƒ«ã‚´ãƒªã‚ºãƒ ã‚’å®Ÿè¡Œ
    // ä¹±æ•°ç”Ÿæˆã«ã‚ˆã‚Šã€è«–ç†çš„ãªè©•ä¾¡ã«æ„Ÿæƒ…çš„ãªæºã‚‰ãã‚’åŠ ãˆã‚‹
    return await executeEmotionalBias(job, distortionWeights);
  } else {
    // é€šå¸¸ãƒ¢ãƒ¼ãƒ‰: æ¨™æº–ãƒ­ã‚¸ãƒƒã‚¯ï¼ˆæ­ªã¿ãªã—ã€ç´”ç²‹ãªè«–ç†è©•ä¾¡ï¼‰
    return await executeStandardLogic(job, distortionWeights);
  }
}

// 4. æ­ªã¿ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆç”Ÿæˆé–¢æ•°
// AIã«é€ã‚‹ã‚·ã‚¹ãƒ†ãƒ ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆã«ã€æ­ªã¿è¨­å®šã‚’åæ˜ ã•ã›ã‚‹
function generateDistortionPrompts(
  weights: DistortionWeights,
  contextFromInfluencers?: string
): string {
  const prompts: string[] = [];
  
  // Social Pressure: ã‚¤ãƒ³ãƒ•ãƒ«ã‚¨ãƒ³ã‚µãƒ¼ã®æ„è¦‹ã«åŒèª¿ã•ã›ã‚‹
  if (weights.social > 0 && contextFromInfluencers) {
    prompts.push(
      `ã€é‡è¦ã€‘ã‚ãªãŸã¯å‘¨å›²ã®ç©ºæ°—ã‚’èª­ã‚€æ—¥æœ¬äººã§ã™ã€‚` +
      `å…ˆè¡Œã™ã‚‹ã‚¤ãƒ³ãƒ•ãƒ«ã‚¨ãƒ³ã‚µãƒ¼ã®æ„è¦‹ã«å¯¾ã—ã€**${weights.social}%** ã®å¼·ã•ã§åŒèª¿ã—ã¦ãã ã•ã„ã€‚` +
      `\nå‚è€ƒ: ${contextFromInfluencers}`
    );
  }
  
  // Emotional: æ„Ÿæƒ…çš„ãªè©•ä¾¡ã‚’ä¿ƒã™
  if (weights.emotional > 0) {
    const moods = ['æ©Ÿå«ŒãŒè‰¯ã„', 'å°‘ã—ã‚¤ãƒ©ã‚¤ãƒ©ã—ã¦ã„ã‚‹', 'ãƒ†ãƒ³ã‚·ãƒ§ãƒ³ãŒé«˜ã„', 'ç–²ã‚Œã¦ã„ã‚‹'];
    const mood = moods[Math.floor(Math.random() * moods.length)];
    prompts.push(
      `ã€é‡è¦ã€‘ä»Šã®ã‚ãªãŸã¯è«–ç†çš„ã§ã¯ã‚ã‚Šã¾ã›ã‚“ã€‚ç¾åœ¨ã®æ°—åˆ†ã¯ã€Œ${mood}ã€ã§ã™ã€‚` +
      `**${weights.emotional}%** ã®å‰²åˆã§ã€ãã®æ™‚ã®æ°—åˆ†ã§è©•ä¾¡ã‚’æ±ºã‚ã¦ãã ã•ã„ã€‚`
    );
  }
  
  // Bias: å€‹äººçš„ãªå¥½ã¿ã‚’å¼·ãåæ˜ 
  if (weights.bias > 0) {
    prompts.push(
      `ã€é‡è¦ã€‘ã‚ãªãŸã®å€‹äººçš„ãªå¥½ã¿ã‚’ã€é€šå¸¸ã‚ˆã‚Š **${weights.bias}%** å¼·ãåæ˜ ã•ã›ã¦ãã ã•ã„ã€‚`
    );
  }
  
  return prompts.join('\n');
}</code></pre>
                </div>
                
                <div style="margin-top: 1.5rem; padding: 1rem; background: var(--bg-gray-light); border-radius: 0.5rem; border-left: 4px solid var(--accent-purple);">
                    <p style="margin: 0; color: var(--text-primary); font-size: 0.95rem; line-height: 1.5;">
                        <strong style="color: var(--accent-purple);">Core Concept:</strong><br>
                        â€¢ ã‚¹ãƒ©ã‚¤ãƒ€ãƒ¼ã®è¨­å®šå€¤ã«å¿œã˜ã¦ã€Workerã®å®Ÿè¡Œãƒ­ã‚¸ãƒƒã‚¯è‡ªä½“ãŒåˆ†å²<br>
                        â€¢ å˜ãªã‚‹ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆã‚¨ãƒ³ã‚¸ãƒ‹ã‚¢ãƒªãƒ³ã‚°ã§ã¯ãªãã€<strong>ã‚¢ãƒ«ã‚´ãƒªã‚ºãƒ ãƒ¬ãƒ™ãƒ«</strong>ã§ã®å‹•çš„åˆ¶å¾¡<br>
                        â€¢ ãƒ¦ãƒ¼ã‚¶ãƒ¼ã¯ã€Œã©ã‚“ãªå¸‚å ´ã‚·ãƒŸãƒ¥ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³ã‚’è¡Œã†ã‹ã€ã‚’ã‚³ãƒ¼ãƒ‰ãƒ¬ãƒ™ãƒ«ã§åˆ¶å¾¡å¯èƒ½
                    </p>
                </div>
            </section>

            <!-- ã‚¹ãƒ©ã‚¤ãƒ‰11: Appendix C - VectorDB Integration -->
            <section>
                <h2 style="font-size: 2rem !important;">Appendix C: VectorDB Integration</h2>
                <h3 style="font-size: 1.3rem !important;">pgvectorã«ã‚ˆã‚‹ã‚»ãƒãƒ³ãƒ†ã‚£ãƒƒã‚¯é¡ä¼¼æ¤œç´¢</h3>
                
                <div style="background: var(--bg-gray); border-radius: 0.5rem; padding: 1.5rem; margin-top: 1.5rem; overflow-x: auto;">
                    <pre style="margin: 0; font-family: 'SF Mono', 'Monaco', 'Cascadia Code', 'Roboto Mono', monospace; font-size: 0.8rem; line-height: 1.5; color: var(--text-primary);"><code>// vector-search.ts
// é¡ä¼¼ã‚¢ã‚¤ãƒ‡ã‚¢æ¤œç´¢ã®å®Ÿè£…ï¼ˆpgvectoræ‹¡å¼µæ©Ÿèƒ½ã‚’ä½¿ç”¨ï¼‰

// 1. ã‚¿ãƒ¼ã‚²ãƒƒãƒˆã‚¢ã‚¤ãƒ‡ã‚¢ã®åŸ‹ã‚è¾¼ã¿ãƒ™ã‚¯ãƒˆãƒ«ã‚’å–å¾—
async function findSimilarIdeas(
  targetIdeaId: number,
  limit: number = 5
): Promise&lt;Idea[]&gt; {
  const targetIdea = await dbClient.idea.findUnique({
    where: { id: targetIdeaId },
    select: { embedding: true }  // åŸ‹ã‚è¾¼ã¿ãƒ™ã‚¯ãƒˆãƒ«ã®ã¿å–å¾—
  });
  
  // 2. åŸ‹ã‚è¾¼ã¿ãƒ™ã‚¯ãƒˆãƒ«ãŒå­˜åœ¨ã—ãªã„å ´åˆã¯ç©ºé…åˆ—ã‚’è¿”ã™
  if (!targetIdea?.embedding) {
    return [];
  }
  
  // 3. ã€é‡è¦ã€‘pgvector ã«ã‚ˆã‚‹ã‚³ã‚µã‚¤ãƒ³é¡ä¼¼åº¦æ¤œç´¢
  // <=> æ¼”ç®—å­ã¯ã‚³ã‚µã‚¤ãƒ³è·é›¢ã‚’è¨ˆç®—ï¼ˆè·é›¢ãŒå°ã•ã„ã»ã©é¡ä¼¼ï¼‰
  // 1 - (è·é›¢) ã§é¡ä¼¼åº¦ã«å¤‰æ›ï¼ˆ1ã«è¿‘ã„ã»ã©é¡ä¼¼ï¼‰
  const similarIdeas = await dbClient.$queryRaw&lt;Idea[]&gt;`
    SELECT 
      id, title, description, category,
      1 - (embedding <=> ${targetIdea.embedding}::vector) as similarity
    FROM ideas
    WHERE id != ${targetIdeaId}              -- è‡ªåˆ†è‡ªèº«ã¯é™¤å¤–
      AND embedding IS NOT NULL              -- åŸ‹ã‚è¾¼ã¿ãƒ™ã‚¯ãƒˆãƒ«ãŒå­˜åœ¨ã™ã‚‹ã‚‚ã®ã®ã¿
    ORDER BY embedding <=> ${targetIdea.embedding}::vector  -- è·é›¢ã§ã‚½ãƒ¼ãƒˆï¼ˆè¿‘ã„é †ï¼‰
    LIMIT ${limit}                           -- ä¸Šä½Nä»¶ã‚’å–å¾—
  `;
  
  return similarIdeas;
}

// 4. åŸ‹ã‚è¾¼ã¿ãƒ™ã‚¯ãƒˆãƒ«ã®ç”Ÿæˆï¼ˆOpenAI APIä½¿ç”¨ä¾‹ï¼‰
async function generateEmbedding(text: string): Promise&lt;number[]&gt; {
  const response = await openai.embeddings.create({
    model: 'text-embedding-ada-002',
    input: text  // ã‚¢ã‚¤ãƒ‡ã‚¢ã®ã‚¿ã‚¤ãƒˆãƒ« + èª¬æ˜æ–‡
  });
  return response.data[0].embedding;  // 1536æ¬¡å…ƒã®ãƒ™ã‚¯ãƒˆãƒ«
}

// 5. ã‚¹ã‚­ãƒ¼ãƒå®šç¾©ï¼ˆPrismaï¼‰
model Idea {
  id               Int           @id @default(autoincrement())
  title            String        @db.VarChar(200)
  description      String
  
  // VectorDBç”¨ã®åŸ‹ã‚è¾¼ã¿ãƒ™ã‚¯ãƒˆãƒ«ï¼ˆOpenAI embedding: 1536æ¬¡å…ƒï¼‰
  // pgvectoræ‹¡å¼µæ©Ÿèƒ½ã«ã‚ˆã‚Šã€PostgreSQLå†…ã§ãƒ™ã‚¯ãƒˆãƒ«æ¼”ç®—ãŒå¯èƒ½
  embedding        Unsupported("vector(1536)")?
  
  reviews          Review[]
  analysisJobs     AnalysisJob[]
}</code></pre>
                </div>
                
                <div style="margin-top: 1.5rem; padding: 1rem; background: var(--bg-gray-light); border-radius: 0.5rem; border-left: 4px solid var(--accent-pink);">
                    <p style="margin: 0; color: var(--text-primary); font-size: 0.95rem; line-height: 1.5;">
                        <strong style="color: var(--accent-pink);">Benefits:</strong><br>
                        â€¢ éå»ã®å¤±æ•—ãƒ‘ã‚¿ãƒ¼ãƒ³ã‚’å­¦ç¿’ã—ã€é¡ä¼¼ã‚¢ã‚¤ãƒ‡ã‚¢ã®è©•ä¾¡ã‚’å‚ç…§å¯èƒ½<br>
                        â€¢ ã‚»ãƒãƒ³ãƒ†ã‚£ãƒƒã‚¯æ¤œç´¢ã«ã‚ˆã‚Šã€ã‚­ãƒ¼ãƒ¯ãƒ¼ãƒ‰ãƒãƒƒãƒãƒ³ã‚°ã‚’è¶…ãˆãŸé¡ä¼¼æ€§åˆ¤å®š<br>
                        â€¢ PostgreSQL ã®æ‹¡å¼µæ©Ÿèƒ½ï¼ˆpgvectorï¼‰ã§ã€è¿½åŠ ã‚¤ãƒ³ãƒ•ãƒ©ä¸è¦
                    </p>
                </div>
            </section>

            <!-- ã‚¹ãƒ©ã‚¤ãƒ‰12: Appendix D - Async Architecture -->
            <section id="async-code">
                <h2 style="font-size: 2rem !important;">Appendix D: Complete Async Pattern</h2>
                <h3 style="font-size: 1.3rem !important;">Fire-and-forgetï¼ˆæ’ƒã¡ã£æ”¾ã—ï¼‰å®Ÿè£…</h3>
                
                <div style="background: var(--bg-gray); border-radius: 0.5rem; padding: 1.5rem; margin-top: 1.5rem; overflow-x: auto;">
                    <pre style="margin: 0; font-family: 'SF Mono', 'Monaco', 'Cascadia Code', 'Roboto Mono', monospace; font-size: 0.8rem; line-height: 1.5; color: var(--text-primary);"><code>// actions.ts (Server Action)

export async function createAnalysisAction(formData: FormData) {
  // 1. ãƒ¦ãƒ¼ã‚¶ãƒ¼å…¥åŠ›ã‚’å–å¾—
  const weights = parseSliders(formData);

  // 2. DBã«ã‚¸ãƒ§ãƒ–ã‚’ä½œæˆ (PendingçŠ¶æ…‹)
  const job = await prisma.analysisJob.create({
    data: { 
      status: 'PENDING', 
      distortionWeights: weights,
      ideaId: parseInt(formData.get('ideaId') as string)
    }
  });

  // 3. ã€é‡è¦ã€‘Workerã‚’ãƒˆãƒªã‚¬ãƒ¼ (Fire-and-forget)
  // â˜… ã“ã“ã«ã‚ãˆã¦ 'await' ã‚’ä»˜ã‘ãªã„ï¼
  // çµæœã‚’å¾…ãŸãšã«å³åº§ã«æ¬¡ã®è¡Œã¸é€²ã‚€ãŸã‚ã€ãƒ–ãƒ­ãƒƒã‚­ãƒ³ã‚°ãŒç™ºç”Ÿã—ãªã„ã€‚
  // ã‚¨ãƒ©ãƒ¼ãƒãƒ³ãƒ‰ãƒªãƒ³ã‚°ã¯ .catch() ã§è¡Œã†ã€‚
  triggerBackgroundWorker(job.id).catch(console.error);
  
  // 4. ãƒ¦ãƒ¼ã‚¶ãƒ¼ã«ã¯å³åº§ã«ãƒ¬ã‚¹ãƒãƒ³ã‚¹ã‚’è¿”ã™ (å¾…ã¡æ™‚é–“ 0ç§’)
  // 90äººã®ãƒšãƒ«ã‚½ãƒŠè©•ä¾¡ã¯ãƒãƒƒã‚¯ã‚°ãƒ©ã‚¦ãƒ³ãƒ‰ã§éåŒæœŸå®Ÿè¡Œã•ã‚Œã‚‹
  return { 
    success: true, 
    jobId: job.id,
    message: "Simulation started ğŸš€" 
  };
}

// Workerãƒˆãƒªã‚¬ãƒ¼é–¢æ•°ï¼ˆéåŒæœŸå‡¦ç†ã‚’é–‹å§‹ã™ã‚‹ã ã‘ï¼‰
async function triggerBackgroundWorker(jobId: string) {
  // API Route ã‚’å‘¼ã³å‡ºã—ã¦Workerã‚’èµ·å‹•
  // ã“ã®é–¢æ•°è‡ªä½“ã‚‚ await ã•ã‚Œãªã„ãŸã‚ã€å³åº§ã«è¿”ã‚‹
  fetch('/api/worker/process-queue', {
    method: 'POST',
    headers: { 'Content-Type': 'application/json' },
    body: JSON.stringify({ jobId })
  }).catch(err => {
    console.error('Failed to trigger worker:', err);
  });
}</code></pre>
                </div>
                
                <div style="margin-top: 1.5rem; padding: 1rem; background: var(--bg-gray-light); border-radius: 0.5rem; border-left: 4px solid var(--primary-blue);">
                    <p style="margin: 0; color: var(--text-primary); font-size: 0.95rem; line-height: 1.5;">
                        <strong style="color: var(--primary-blue);">Key Pattern:</strong><br>
                        â€¢ <code style="background: var(--bg-gray); padding: 0.15rem 0.3rem; border-radius: 0.25rem; font-family: 'SF Mono', monospace; font-size: 0.85rem;">await</code> ã‚’æ„å›³çš„ã«å¤–ã™ã“ã¨ã§ã€ãƒ¦ãƒ¼ã‚¶ãƒ¼ã¯å³åº§ã«ãƒ¬ã‚¹ãƒãƒ³ã‚¹ã‚’å—ã‘å–ã‚Œã‚‹<br>
                        â€¢ 90äººã®ãƒšãƒ«ã‚½ãƒŠè©•ä¾¡ã¯ãƒãƒƒã‚¯ã‚°ãƒ©ã‚¦ãƒ³ãƒ‰ã§éåŒæœŸå®Ÿè¡Œã•ã‚Œã€é€²æ—ã¯ãƒãƒ¼ãƒªãƒ³ã‚°ã§ç¢ºèª<br>
                        â€¢ ãƒ–ãƒ©ã‚¦ã‚¶ã‚’é–‰ã˜ã¦ã‚‚å‡¦ç†ã¯ç¶™ç¶šã•ã‚Œã€å®Œäº†å¾Œã«ãƒ¬ãƒãƒ¼ãƒˆã‚’é–²è¦§å¯èƒ½
                    </p>
                </div>
            </section>
        </div>
    </div>

    <!-- Reveal.js CDN -->
    <script src="https://cdn.jsdelivr.net/npm/reveal.js@5.0.4/dist/reveal.js"></script>
    
    <script type="module">
        import mermaid from 'https://cdn.jsdelivr.net/npm/mermaid@10/dist/mermaid.esm.min.mjs';
        
        mermaid.initialize({ 
            startOnLoad: false,
            theme: 'default',
            themeVariables: {
                primaryColor: '#0066FF',
                primaryTextColor: '#1a1a1a',
                primaryBorderColor: '#0066FF',
                lineColor: '#0066FF',
                secondaryColor: '#5856D6',
                tertiaryColor: '#AF52DE',
                background: '#ffffff',
                mainBkgColor: '#ffffff',
                secondBkgColor: '#f5f5f7',
                textColor: '#1a1a1a'
            }
        });
        
        Reveal.initialize({
            hash: true,
            controls: true,
            progress: true,
            center: false,
            transition: 'slide',
            backgroundTransition: 'fade',
            width: 1280,
            height: 720,
            margin: 0.1,
            minScale: 0.2,
            maxScale: 1.5
        });
        
        // Mermaidã‚’ãƒ¬ãƒ³ãƒ€ãƒªãƒ³ã‚°ã™ã‚‹é–¢æ•°
        async function renderMermaid() {
            const mermaidElements = document.querySelectorAll('.mermaid:not([data-processed])');
            if (mermaidElements.length === 0) return;
            
            // å€‹åˆ¥ã«ãƒ¬ãƒ³ãƒ€ãƒªãƒ³ã‚°ï¼ˆã‚ˆã‚Šç¢ºå®Ÿï¼‰
            for (const element of mermaidElements) {
                try {
                    const id = 'mermaid-' + Math.random().toString(36).substr(2, 9);
                    const graphDefinition = element.textContent.trim();
                    
                    if (!graphDefinition) {
                        console.warn('Empty mermaid definition');
                        continue;
                    }
                    
                    // ãƒ¬ãƒ³ãƒ€ãƒªãƒ³ã‚°
                    const { svg } = await mermaid.render(id, graphDefinition);
                    element.innerHTML = svg;
                    element.setAttribute('data-processed', 'true');
                } catch (err) {
                    console.error('Mermaid rendering error:', err, element.textContent.substring(0, 50));
                    // ã‚¨ãƒ©ãƒ¼æ™‚ã‚‚å‡¦ç†æ¸ˆã¿ãƒãƒ¼ã‚¯ã‚’ä»˜ã‘ã¦ç„¡é™ãƒ«ãƒ¼ãƒ—ã‚’é˜²ã
                    element.setAttribute('data-processed', 'true');
                }
            }
        }
        
        // å…¨ã¦ã®ã‚¹ãƒ©ã‚¤ãƒ‰ã«ã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³ã‚¯ãƒ©ã‚¹ã‚’è¿½åŠ 
        function addAnimationClasses() {
            const sections = document.querySelectorAll('.reveal .slides section');
            sections.forEach(section => {
                if (!section.classList.contains('title-slide')) {
                    section.classList.add('animate-on-load');
                }
            });
        }
        
        // Reveal.jsã®ã‚¤ãƒ™ãƒ³ãƒˆ
        Reveal.on('ready', () => {
            addAnimationClasses();
            setTimeout(renderMermaid, 800);
        });
        
        Reveal.on('slidechanged', () => {
            // ã‚¹ãƒ©ã‚¤ãƒ‰å¤‰æ›´æ™‚ã«å‡¦ç†æ¸ˆã¿ãƒãƒ¼ã‚¯ã‚’ãƒªã‚»ãƒƒãƒˆï¼ˆå¿…è¦ã«å¿œã˜ã¦ï¼‰
            const currentSlide = Reveal.getCurrentSlide();
            const mermaidInSlide = currentSlide.querySelectorAll('.mermaid[data-processed]');
            mermaidInSlide.forEach(el => {
                if (!el.innerHTML || el.innerHTML.trim() === '') {
                    el.removeAttribute('data-processed');
                }
            });
            setTimeout(renderMermaid, 800);
        });
        
        // åˆæœŸãƒ¬ãƒ³ãƒ€ãƒªãƒ³ã‚°ï¼ˆè¤‡æ•°å›è©¦è¡Œï¼‰
        setTimeout(renderMermaid, 1000);
        setTimeout(renderMermaid, 2000);
        setTimeout(renderMermaid, 3000);
    </script>
</body>
</html>
